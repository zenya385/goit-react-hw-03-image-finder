{"version":3,"sources":["components/searchbar/Searchbar.module.css","components/imageGallery/ImageGallery.module.css","components/imageGallery/imageGalleryItem/ImageGalleryItem.module.css","components/modal/Modal.module.css","components/App.module.css","components/button/Button.module.css","components/searchbar/Searchbar.js","components/imageGallery/imageGalleryItem/ImageGalleryItem.js","components/button/Button.js","components/modal/Modal.js","components/imageGallery/ImageGallery.js","components/App.js","index.js"],"names":["module","exports","Searchbar","state","inputValue","handleInput","e","value","target","setState","toLowerCase","handleSubmit","event","preventDefault","trim","props","onSubmit","alert","className","style","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","placeholder","onChange","Component","ImageGalleryItem","src","alt","modalUrl","onClickCurrentImage","ImageGalleryItemImage","onClick","Button","LoadMore","modalRoot","document","querySelector","Modal","onCLoseModal","code","onClose","onOverlayClose","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","BASE_URL","API_KEY","ImageGallery","gallery","page","largeImg","onLoadMore","prev","toggleModal","showModal","findTargetImg","url","dataset","prevProp","prevState","a","fetch","then","response","json","hits","scrollTo","top","documentElement","scrollHeight","behavior","main","map","image","webformatURL","tags","largeImageURL","id","App","handleFormSearch","searchQuery","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b0a5d34b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__-a5oT\",\"SearchForm\":\"Searchbar_SearchForm__1jeAW\",\"SearchFormButton\":\"Searchbar_SearchFormButton__ncqk-\",\"SearchForm-button\":\"Searchbar_SearchForm-button__2vmrF\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1M26K\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3r50V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__LYCqU\",\"main\":\"ImageGallery_main__39LRK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2-iJY\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3HA3v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1nlw4\",\"Modal\":\"Modal_Modal__38Yxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1Uemd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1VzOg\"};","import React, {Component} from \"react\";\nimport style from \"./Searchbar.module.css\";\n\nclass Searchbar extends Component {\n\n    state = {\n        inputValue: '',\n    }\n\n    handleInput = (e) => {\n        const {value} = e.target;\n        this.setState({\n            inputValue: value.toLowerCase(),\n        })\n\n        // console.log('value: ' + value)\n    }\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n\n        if (this.state.inputValue.trim() === '') {\n            alert(\"Введите название изображения\")\n            return;\n        }\n\n        this.props.onSubmit(this.state.inputValue);\n        this.setState({\n            inputValue: '',\n        })\n    }\n\n    render() {\n        return (\n            <header className={style.Searchbar}>\n                <form onSubmit={this.handleSubmit} className={style.SearchForm}>\n                    <button type=\"submit\" className={style.SearchFormButton}>\n                        <span className={style.SearchFormButtonLabel}>Search</span>\n                    </button>\n\n                    <input\n                        className={style.SearchFormInput}\n                        type=\"text\"\n                        // autocomplete=\"off\"\n                        // autofocus\n                        placeholder=\"Search images and photos\"\n                        onChange={this.handleInput}\n                        value={this.state.inputValue}\n                    />\n                </form>\n            </header>\n        );\n    }\n}\n\nexport default Searchbar;\n","import React from \"react\";\nimport style from \"./ImageGalleryItem.module.css\";\n\nconst ImageGalleryItem = ({src, alt, modalUrl, onClickCurrentImage}) => {\n\n    return (\n        <>\n            <li className={style.ImageGalleryItem}>\n                <img\n                    src={src}\n                    alt={alt}\n                    className={style.ImageGalleryItemImage}\n                    data-url={modalUrl}\n                    onClick={onClickCurrentImage}\n                />\n            </li>\n        </>\n\n    );\n}\n\nexport default ImageGalleryItem;","import React from \"react\";\nimport style from \"./Button.module.css\";\n\nconst Button = ({LoadMore}) => {\n    return (\n        <button type=\"button\" className={style.Button} onClick={LoadMore}>Load more</button>\n    );\n}\n\nexport default Button;","import React, {Component} from \"react\";\nimport {createPortal} from \"react-dom\";\nimport style from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n    componentDidMount(e) {\n        window.addEventListener(\"keydown\", this.onCLoseModal);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"keydown\", this.onCLoseModal);\n    }\n\n    onCLoseModal = (e) => {\n        // console.log(e.code)\n        if (e.code === 'Escape') {\n            this.props.onClose();\n        }\n    }\n\n    onOverlayClose = (e) => {\n        if (e.currentTarget === e.target) {\n            this.props.onClose();\n        }\n    }\n\n    render() {\n        return createPortal(\n            <div className={style.Overlay} onClick={this.onOverlayClose}>\n                <div className={style.Modal}>\n                    {this.props.children}\n                </div>\n            </div>,\n            modalRoot,\n        );\n    }\n\n}\n\nexport default Modal;","import React, {Component} from \"react\";\nimport style from \"./ImageGallery.module.css\";\nimport ImageGalleryItem from \"./imageGalleryItem/ImageGalleryItem\";\nimport Button from \"../button/Button\";\nimport Modal from \"../modal/Modal\";\n// import Loader from \"react-loader-spinner\";\n// import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nconst BASE_URL = \"https://pixabay.com/api/?\";\nconst API_KEY = \"23297096-fdec21a8bcbab7faa251f0233\";\n\nclass ImageGallery extends Component {\n\n    state = {\n        gallery: [],\n        page: 1,\n        // showModal: false,\n        largeImg: '',\n    }\n\n    async componentDidUpdate(prevProp, prevState) {\n\n        if (this.props.inputValue !== prevProp.inputValue) {\n            fetch(BASE_URL + `q=${this.props.inputValue}&page=1&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`)\n                .then(response => response.json())\n                .then(gallery => {\n                    // console.log(gallery)\n                    this.setState(prevState => ({\n                        gallery: gallery.hits,\n                        page: 1\n                    }))\n\n                    // this.setState(prev => {\n                    //     console.log(this.state.page)\n                    //     console.log(prev.page)\n                    // })\n                })\n\n            // if (result.data) {\n            //     const keys = Object.keys(result.data)\n            //     // console.log('keys: ' + keys)\n            //     console.log(keys)\n            //     const products = keys.map(key => ({\n            //         id: key,\n            //         ...response.data[key]\n            //     }))\n            //     // console.log(keys)\n            //     console.log(products)\n            //     // return products;\n            // }\n        }\n\n        if (this.state.page !== prevState.page && this.state.page !== 1) {\n            fetch(BASE_URL + `q=${this.props.inputValue}&page=${this.state.page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`)\n                .then(response => response.json())\n                .then(gallery => {\n                    this.setState(prevState => ({\n                        gallery: [...prevState.gallery, ...gallery.hits]\n                        // console.log(prevState.state.page)\n\n                    }))\n                    // this.setState(prev => {\n                    //     // console.log([...prev.gallery, ...gallery.hits])\n                    //     console.log(this.state.page)\n                    //     console.log(prev.page)\n                    // })\n                })\n        }\n\n        if (this.state.gallery !== prevState.gallery) {\n            window.scrollTo({\n                top: document.documentElement.scrollHeight,\n                behavior: \"smooth\",\n            });\n        }\n    }\n\n    onLoadMore = () => {\n        this.setState(prev => ({\n            page: prev.page + 1,\n        }))\n\n    }\n\n    toggleModal = () => {\n        this.setState(state => ({\n            showModal: !state.showModal,\n        }))\n    }\n\n    findTargetImg = (e) => {\n        const url = e.target.dataset.url;\n        this.setState((prev) => ({\n            showModal: !prev.showModal,\n            largeImg: url\n        }));\n    };\n\n\n    render() {\n        const {gallery, showModal, largeImg} = this.state;\n        // console.log(largeImg)\n\n        return (\n            <main className={style.main}>\n                <ul className={style.ImageGallery}>\n                    {gallery.map(image => <ImageGalleryItem\n                        src={image.webformatURL}\n                        alt={image.tags} key={image.id}\n                        modalUrl={image.largeImageURL}\n                        // largeImg={image.largeImageURL}\n                        onClickCurrentImage={this.findTargetImg}\n                        // onClose={this.toggleModal}\n                        // showModal={showModal}\n\n                    />\n                    )}\n                </ul>\n                {showModal && <Modal onClose={this.toggleModal}>\n                    <img src={largeImg} alt=\"\"/>\n                </Modal>}\n\n                <Button LoadMore={this.onLoadMore}/>\n                {/*<Loader*/}\n                {/*    type=\"Puff\"*/}\n                {/*    color=\"#00BFFF\"*/}\n                {/*    height={100}*/}\n                {/*    width={100}*/}\n                {/*    timeout={3000} //3 secs*/}\n                {/*/>*/}\n            </main>\n        );\n    }\n}\n\nexport default ImageGallery;","import React, {Component} from \"react\";\nimport style from \"./App.module.css\";\nimport Searchbar from \"./searchbar/Searchbar\";\n\n// import Api from \"./services/Api\";\n// import getImagesFromApi from \"./services/Api\"\nimport ImageGallery from \"./imageGallery/ImageGallery\";\n\n\n\nclass App extends Component {\n\n    state = {\n        value: '',\n        // currentPage: '',\n\n    }\n\n    // const result = async getImagesFromApi(value, currentPage)\n\n    // async componentDidMount() {\n    //     const {value, currentPage} = this.state;\n    //     const result = await getImagesFromApi(value, currentPage )\n    //     this.setState({gallery: result.hits})\n    //     console.log(this.state.gallery)\n    // }\n    // async componentDidUpdate(prevState) {\n    //     console.log('componentDidUpdate')\n    //     // console.log('prevState: ' + prevState.gallery)\n    //     // console.log(this.state.gallery)\n    //     const {value, currentPage} = this.state;\n    //     // const result = await\n    //     // if (this.state.gallery !== prevState.gallery) {\n    //         getImagesFromApi(value, currentPage).then(gallery => {\n    //             // console.log(gallery.hits)\n    //             this.setState({gallery: gallery.hits})\n    //         })\n    //\n    //         // console.log(result.hits)\n    //         //     this.setState({gallery: result.hits})\n    //     // }\n    // }\n\n    handleFormSearch = (searchQuery) => {\n        this.setState({\n            value: searchQuery,\n            // page: this.state.page + 1\n        })\n    }\n\n    render() {\n        return (\n            <div className={style.App}>\n                <Searchbar onSubmit={this.handleFormSearch}/>\n                <ImageGallery inputValue={this.state.value}/>\n                {/*<Api*/}\n                {/*    page={this.state.page}*/}\n                {/*    inputValue={this.state.value}*/}\n                {/*/>*/}\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}